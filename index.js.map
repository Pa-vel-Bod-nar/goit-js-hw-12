{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49651388-bf829c1018596f8ebf90706c1';\n\nlet page = 1; \n\n\nasync function getImagesByQuery(query, page = 1) {\n    const response = await axios.get(BASE_URL, {\n        params: {\n            key: API_KEY,\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page,\n            per_page: 15, \n        },\n    });\n   return response.data\n}\n\nexport { getImagesByQuery };\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\nconst gallery = document.querySelector('.gallery');\n\nexport function createGallery(images) {\n    \n    const markup = images\n        .map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\n            return `\n            <a class=\"gallery__item\" href=\"${largeImageURL}\">\n             <img class=\"gallery__image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n               <div class=\"info\">\n              <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n              <p class=\"info-item\"><b>Views:</b> ${views}</p>\n              <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n              <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n            </div>\n        </a>`;\n        \n        })\n\n    .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh(); // ðŸ”„ Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸ Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð¹ Ð²ÑÑ‚Ð°Ð²ÐºÐµ\n      }\n};\n\n\n\nexport function clearGallery() {\n    return gallery.innerHTML = '';\n};\n\nexport function showLoader() {\n    document.querySelector('.loader').classList.remove('hidden');\n};\n\nexport function hideLoader(){\n    document.querySelector('.loader').classList.add('hidden');\n};\n\nexport function showLoadMoreButton(){\n    document.querySelector('.load-more').classList.remove('load-more-hidden');\n};\n\nexport function hideLoadMoreButton(){\n    document.querySelector('.load-more').classList.add('load-more-hidden');\n};\n\n\n","import './css/styles.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {getImagesByQuery} from './js/pixabay-api.js';\nimport {\n    createGallery, \n    clearGallery, \n    showLoader, \n    hideLoader, \n    showLoadMoreButton,\n    hideLoadMoreButton,\n} from './js/render-functions.js';\n\n\n\nconst form = document.querySelector('.search-form');\n\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentQuery = '';\nlet currentPage = 1;\n\nconst perPage = 15;\n\n\nform.addEventListener('submit', async event =>{\n    event.preventDefault();\n\n    const query = event.currentTarget.elements.searchQuery.value.trim();\n\n    if (!query){\n        iziToast.warning({\n            title: 'Attention',\n            message: 'Input yuor request!',\n            position: 'topRight',\n          });\n          return;\n    }\n\n    try{\n        showLoader(); \n        hideLoadMoreButton();\n        clearGallery();\n\n        currentQuery = query;\n        currentPage = 1;\n\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        \n\n        if (data.hits.length === 0) {\n            iziToast.info({\n              title: 'There is nothing was found',\n              message: 'Try another request',\n              position: 'topRight',\n            });\n            return;\n        }\n      \n        createGallery(data.hits);\n\n        const totalPages = Math.ceil(data.totalHits / perPage);\n        if (currentPage < totalPages) {\n          showLoadMoreButton();\n        }\n\n        \n    \n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong!',\n            position: 'topRight',\n          });\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage +=1;\n\n    try{\n        showLoader();\n        \n        const data = await getImagesByQuery(currentQuery, currentPage);\n\n        createGallery(data.hits);\n\n        const totalPages = Math.ceil(data.totalHits / perPage);\n\n        if (currentPage >= totalPages) {\n            hideLoadMoreButton();\n        \n\n        iziToast.info({\n            title: 'End of collection',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topRight',\n          });\n        }\n\n        const firstGalleryItem = document.querySelector('.gallery .gallery__item');\n    if (firstGalleryItem) {\n      const { height: cardHeight } = firstGalleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n   \n    } catch (error){\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to load more images.',\n            position: 'topRight',\n          });\n    } finally{\n        hideLoader();\n    }\n});"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","lightbox","gallery","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","loadMoreBtn","currentQuery","currentPage","perPage","event","iziToast","data","totalPages","firstGalleryItem","cardHeight"],"mappings":"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"}